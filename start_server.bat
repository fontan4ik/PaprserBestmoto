@echo off
chcp 65001 > nul
title Ð¡ÐµÑ€Ð²ÐµÑ€ ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð½Ð¾Ð³Ð¾ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°

echo.
echo ============================================================
echo           ðŸš€ Ð—Ð°Ð¿ÑƒÑÐº ÑÐµÑ€Ð²ÐµÑ€Ð° ÐºÐ¾Ð½ÐºÑƒÑ€ÐµÐ½Ñ‚Ð½Ð¾Ð³Ð¾ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°
echo ============================================================
echo.

REM ÐžÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð²ÑÐµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹ Python
echo ðŸ›‘ ÐžÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹...
taskkill /F /IM python.exe /T > nul 2>&1
taskkill /F /IM pythonw.exe /T > nul 2>&1
taskkill /F /IM chrome.exe /T > nul 2>&1
taskkill /F /IM chromedriver.exe /T > nul 2>&1

timeout /t 2 /nobreak > nul

echo âœ… Ð¡Ñ‚Ð°Ñ€Ñ‹Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹
echo.

REM ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¿Ð¾Ñ€Ñ‚ 5000
echo ðŸ” ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð¿Ð¾Ñ€Ñ‚ 5000...
netstat -ano | findstr ":5000" | findstr "LISTENING" > nul
if %errorlevel% equ 0 (
    echo âš ï¸  ÐŸÐ¾Ñ€Ñ‚ 5000 Ð²ÑÐµ ÐµÑ‰Ðµ Ð·Ð°Ð½ÑÑ‚, Ð¾ÑÐ²Ð¾Ð±Ð¾Ð¶Ð´Ð°ÐµÐ¼...
    for /f "tokens=5" %%a in ('netstat -ano ^| findstr ":5000" ^| findstr "LISTENING"') do (
        taskkill /F /PID %%a > nul 2>&1
    )
    timeout /t 2 /nobreak > nul
)
echo âœ… ÐŸÐ¾Ñ€Ñ‚ 5000 ÑÐ²Ð¾Ð±Ð¾Ð´ÐµÐ½
echo.

REM ÐŸÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ð¼ Ð² Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
cd /d "%~dp0"
echo ðŸ“‚ Ð Ð°Ð±Ð¾Ñ‡Ð°Ñ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ: %cd%
echo.

REM ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€ÑƒÐµÐ¼ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ
if exist ".venv\Scripts\activate.bat" (
    echo ðŸ ÐÐºÑ‚Ð¸Ð²Ð¸Ñ€ÑƒÐµÐ¼ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ...
    call .venv\Scripts\activate.bat
    echo âœ… Ð’Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ Ð°ÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾
) else (
    echo âŒ Ð’Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ð¾Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾!
    echo    Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐµÐ³Ð¾: python -m venv .venv
    pause
    exit /b 1
)
echo.

REM Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ ÑÐµÑ€Ð²ÐµÑ€
echo ============================================================
echo ðŸŸ¢ Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ ÑÐµÑ€Ð²ÐµÑ€...
echo ============================================================
echo.
echo ðŸ“ ÐÐ´Ñ€ÐµÑ: http://localhost:5000
echo.
echo Ð”Ð»Ñ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð½Ð°Ð¶Ð¼Ð¸Ñ‚Ðµ Ctrl+C
echo.

python server.py

REM ÐŸÐ¾ÑÐ»Ðµ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ ÑÐµÑ€Ð²ÐµÑ€Ð°
echo.
echo ============================================================
echo ðŸ›‘ Ð¡ÐµÑ€Ð²ÐµÑ€ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½
echo ============================================================
echo.

REM ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹ Ð¿Ð¾ÑÐ»Ðµ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸
echo ðŸ§¹ ÐžÑ‡Ð¸Ñ‰Ð°ÐµÐ¼ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹...
taskkill /F /IM chrome.exe /T > nul 2>&1
taskkill /F /IM chromedriver.exe /T > nul 2>&1

echo âœ… Ð“Ð¾Ñ‚Ð¾Ð²Ð¾
pause

